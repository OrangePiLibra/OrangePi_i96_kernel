#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/platform_device.h>
#include <linux/delay.h>
#include <linux/jiffies.h>
#include <linux/gpio.h>

#include <plat/devices.h>
#include <plat/rda_debug.h>
#include <mach/board.h>

#include "rda_gouda.h"
#include "rda_panel.h"

#define RM68180_MCU_CHIP_ID			0x9826
#ifdef CONFIG_PM
#include <linux/regulator/consumer.h>
#include <mach/regulator.h>
#endif /* CONFIG_PM */

//static u8 vcom=0x3b;
static struct rda_lcd_info rm68180_mcu_info;
static struct rda_panel_id_param rm68180_id_param;

/* wngl, for FPGA */
#define RM68180_MCU_TIMING {\
	{\
		.tas = 3,\
		.tah = 3,\
		.pwl = 8,\
		.pwh = 8\
	}\
}

#define RM68180_MCU_CONFIG {\
	{\
		.cs = GOUDA_LCD_CS_0,\
		.output_fmt = GOUDA_LCD_OUTPUT_FORMAT_16_bit_RGB565,\
		.cs0_polarity = false,\
		.cs1_polarity = false,\
		.rs_polarity = false,\
		.wr_polarity = false,\
		.rd_polarity = false,  \
		.te_en           =   1,	 \
		.tecon2		 = 0x100  \
	}\
}

static struct rda_lcd_info rm68180_mcu_info;

static int rm68180_mcu_init_gpio(void)
{

	gpio_request(GPIO_LCD_RESET, "lcd reset");
	gpio_direction_output(GPIO_LCD_RESET, 1);

	gpio_set_value(GPIO_LCD_RESET, 1);
	msleep(10);
	gpio_set_value(GPIO_LCD_RESET, 0);
	msleep(10);
	gpio_set_value(GPIO_LCD_RESET, 1);
	msleep(120);

	return 0;
}

static int rm68180_mcu_readid_sub(void)
{
	u16 data[6] = {0};
	u32 cmd = 0xc500;

	LCD_MCU_CMD(0xF000); LCD_MCU_DATA(0x55);
	LCD_MCU_CMD(0xF001); LCD_MCU_DATA(0xAA);
	LCD_MCU_CMD(0xF002); LCD_MCU_DATA(0x52);
	LCD_MCU_CMD(0xF003); LCD_MCU_DATA(0x08);
	LCD_MCU_CMD(0xF004); LCD_MCU_DATA(0x01);

	/* read id */
	panel_mcu_read_id(cmd,&rm68180_id_param,data);

	printk("****rda_fb: rm68180_mcu  ID:"
	       "%02x %02x %02x %02x %02x %02x\n",
	       data[0], data[1], data[2], data[3], data[4], data[5]);

	if(data[0] == 0x18 || data[1] == 0x18)
		return 1;
	return 0;
}

static int rm68180_mcu_readid(void)
{
	struct regulator *lcd_reg;
	struct gouda_lcd *lcd = (void *)&(rm68180_mcu_info.lcd);
	int ret = 0;

#ifdef CONFIG_PM
	lcd_reg = regulator_get(NULL, LDO_LCD);
	if (IS_ERR(lcd_reg)) {
		printk(KERN_ERR"rda-fb not find lcd regulator devices\n");
		return 0;
	}
#if 0 //by rda zlx_050211
	if ( regulator_enable(lcd_reg)< 0) {
		printk(KERN_ERR"rda-fb lcd could not be enabled!\n");
		return 0;
	}
#endif
#endif /* CONFIG_PM */

	rda_gouda_pre_enable_lcd(lcd,1);
	rm68180_mcu_init_gpio();

	/* adjust timming */
	lcd->lcd_timing.mcu.pwl = 32;
	lcd->lcd_timing.mcu.pwh = 32;
	rda_gouda_configure_timing(lcd);
	ret = rm68180_mcu_readid_sub();

	/* adjust timming */
	lcd->lcd_timing.mcu.pwl = 8;
	lcd->lcd_timing.mcu.pwh = 8;

	rda_gouda_configure_timing(lcd);
	rda_gouda_pre_enable_lcd(lcd,0);

#if 0//def CONFIG_PM  by rda zlx_050211
	if ( regulator_disable(lcd_reg)< 0) {
		printk(KERN_ERR"rda-fb lcd could not be enabled!\n");
		//return 0;
	}
#endif /* CONFIG_PM */

	return ret;
}

static int rm68180_mcu_open(void)
{
	unsigned int width =0, height=0;

	printk("%s \n",__func__);
	LCD_MCU_CMD(0xF000); LCD_MCU_DATA(0x55);
	LCD_MCU_CMD(0xF001); LCD_MCU_DATA(0xAA);
	LCD_MCU_CMD(0xF002); LCD_MCU_DATA(0x52);
	LCD_MCU_CMD(0xF003); LCD_MCU_DATA(0x08);
	LCD_MCU_CMD(0xF004); LCD_MCU_DATA(0x01);

	LCD_MCU_CMD(0xB000); LCD_MCU_DATA(0x0D);
	LCD_MCU_CMD(0xB001); LCD_MCU_DATA(0x0D);
	LCD_MCU_CMD(0xB002); LCD_MCU_DATA(0x0D);

	LCD_MCU_CMD(0xB100); LCD_MCU_DATA(0x05);
	LCD_MCU_CMD(0xB101); LCD_MCU_DATA(0x05);
	LCD_MCU_CMD(0xB102); LCD_MCU_DATA(0x05);

	LCD_MCU_CMD(0xB600); LCD_MCU_DATA(0x34);
	LCD_MCU_CMD(0xB601); LCD_MCU_DATA(0x34);
	LCD_MCU_CMD(0xB602); LCD_MCU_DATA(0x34);

	LCD_MCU_CMD(0xB700); LCD_MCU_DATA(0x34);
	LCD_MCU_CMD(0xB701); LCD_MCU_DATA(0x34);
	LCD_MCU_CMD(0xB702); LCD_MCU_DATA(0x34);

	LCD_MCU_CMD(0xB800); LCD_MCU_DATA(0x24);
	LCD_MCU_CMD(0xB801); LCD_MCU_DATA(0x24);
	LCD_MCU_CMD(0xB802); LCD_MCU_DATA(0x24);

	LCD_MCU_CMD(0xB900); LCD_MCU_DATA(0x34);
	LCD_MCU_CMD(0xB901); LCD_MCU_DATA(0x34);
	LCD_MCU_CMD(0xB902); LCD_MCU_DATA(0x34);

	LCD_MCU_CMD(0xBA00); LCD_MCU_DATA(0x04);
	LCD_MCU_CMD(0xBA01); LCD_MCU_DATA(0x04);
	LCD_MCU_CMD(0xBA02); LCD_MCU_DATA(0x04);

	LCD_MCU_CMD(0xBC00); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xBC01); LCD_MCU_DATA(0x90);
	LCD_MCU_CMD(0xBC02); LCD_MCU_DATA(0x00);

	LCD_MCU_CMD(0xBD00); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xBD01); LCD_MCU_DATA(0x90);
	LCD_MCU_CMD(0xBD02); LCD_MCU_DATA(0x00);

	LCD_MCU_CMD(0xBE00); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xBE01); LCD_MCU_DATA(0x65);

	LCD_MCU_CMD(0xCC00); LCD_MCU_DATA(0x05);
/*
	LCD_MCU_CMD(0xD100); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD101); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD102); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD103); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD104); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD105); LCD_MCU_DATA(0x18);
	LCD_MCU_CMD(0xD106); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD107); LCD_MCU_DATA(0x3B);
	LCD_MCU_CMD(0xD108); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD109); LCD_MCU_DATA(0x60);
	LCD_MCU_CMD(0xD10A); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD10B); LCD_MCU_DATA(0x9E);
	LCD_MCU_CMD(0xD10C); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD10D); LCD_MCU_DATA(0xCF);
	LCD_MCU_CMD(0xD10E); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD10F); LCD_MCU_DATA(0x17);
	LCD_MCU_CMD(0xD110); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD111); LCD_MCU_DATA(0x4B);
	LCD_MCU_CMD(0xD112); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD113); LCD_MCU_DATA(0x93);
	LCD_MCU_CMD(0xD114); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD115); LCD_MCU_DATA(0xC6);
	LCD_MCU_CMD(0xD116); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD117); LCD_MCU_DATA(0x10);
	LCD_MCU_CMD(0xD118); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD119); LCD_MCU_DATA(0x48);
	LCD_MCU_CMD(0xD11A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD11B); LCD_MCU_DATA(0x49);
	LCD_MCU_CMD(0xD11C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD11D); LCD_MCU_DATA(0x79);
	LCD_MCU_CMD(0xD11E); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD11F); LCD_MCU_DATA(0xAA);
	LCD_MCU_CMD(0xD120); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD121); LCD_MCU_DATA(0xC4);
	LCD_MCU_CMD(0xD122); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD123); LCD_MCU_DATA(0xE4);
	LCD_MCU_CMD(0xD124); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD125); LCD_MCU_DATA(0xF8);
	LCD_MCU_CMD(0xD126); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD127); LCD_MCU_DATA(0x10);
	LCD_MCU_CMD(0xD128); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD129); LCD_MCU_DATA(0x20);
	LCD_MCU_CMD(0xD12A); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD12B); LCD_MCU_DATA(0x36);
	LCD_MCU_CMD(0xD12C); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD12D); LCD_MCU_DATA(0x46);
	LCD_MCU_CMD(0xD12E); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD12F); LCD_MCU_DATA(0x5C);
	LCD_MCU_CMD(0xD130); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD131); LCD_MCU_DATA(0x8B);
	LCD_MCU_CMD(0xD132); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD133); LCD_MCU_DATA(0xFF);

	LCD_MCU_CMD(0xD200); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD201); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD202); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD203); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD204); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD205); LCD_MCU_DATA(0x18);
	LCD_MCU_CMD(0xD206); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD207); LCD_MCU_DATA(0x3B);
	LCD_MCU_CMD(0xD208); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD209); LCD_MCU_DATA(0x60);
	LCD_MCU_CMD(0xD20A); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD20B); LCD_MCU_DATA(0x9E);
	LCD_MCU_CMD(0xD20C); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD20D); LCD_MCU_DATA(0xCF);
	LCD_MCU_CMD(0xD20E); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD20F); LCD_MCU_DATA(0x17);
	LCD_MCU_CMD(0xD210); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD211); LCD_MCU_DATA(0x4B);
	LCD_MCU_CMD(0xD212); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD213); LCD_MCU_DATA(0x93);
	LCD_MCU_CMD(0xD214); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD215); LCD_MCU_DATA(0xC6);
	LCD_MCU_CMD(0xD216); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD217); LCD_MCU_DATA(0x10);
	LCD_MCU_CMD(0xD218); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD219); LCD_MCU_DATA(0x48);
	LCD_MCU_CMD(0xD21A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD21B); LCD_MCU_DATA(0x49);
	LCD_MCU_CMD(0xD21C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD21D); LCD_MCU_DATA(0x79);
	LCD_MCU_CMD(0xD21E); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD21F); LCD_MCU_DATA(0xAA);
	LCD_MCU_CMD(0xD220); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD221); LCD_MCU_DATA(0xC4);
	LCD_MCU_CMD(0xD222); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD223); LCD_MCU_DATA(0xE4);
	LCD_MCU_CMD(0xD224); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD225); LCD_MCU_DATA(0xF8);
	LCD_MCU_CMD(0xD226); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD227); LCD_MCU_DATA(0x10);
	LCD_MCU_CMD(0xD228); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD229); LCD_MCU_DATA(0x20);
	LCD_MCU_CMD(0xD22A); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD22B); LCD_MCU_DATA(0x36);
	LCD_MCU_CMD(0xD22C); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD22D); LCD_MCU_DATA(0x46);
	LCD_MCU_CMD(0xD22E); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD22F); LCD_MCU_DATA(0x5C);
	LCD_MCU_CMD(0xD230); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD231); LCD_MCU_DATA(0x8B);
	LCD_MCU_CMD(0xD232); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD233); LCD_MCU_DATA(0xFF);

	LCD_MCU_CMD(0xD300); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD301); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD302); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD303); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD304); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD305); LCD_MCU_DATA(0x18);
	LCD_MCU_CMD(0xD306); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD307); LCD_MCU_DATA(0x3B);
	LCD_MCU_CMD(0xD308); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD309); LCD_MCU_DATA(0x60);
	LCD_MCU_CMD(0xD30A); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD30B); LCD_MCU_DATA(0x9E);
	LCD_MCU_CMD(0xD30C); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD30D); LCD_MCU_DATA(0xCF);
	LCD_MCU_CMD(0xD30E); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD30F); LCD_MCU_DATA(0x17);
	LCD_MCU_CMD(0xD310); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD311); LCD_MCU_DATA(0x4B);
	LCD_MCU_CMD(0xD312); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD313); LCD_MCU_DATA(0x93);
	LCD_MCU_CMD(0xD314); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD315); LCD_MCU_DATA(0xC6);
	LCD_MCU_CMD(0xD316); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD317); LCD_MCU_DATA(0x10);
	LCD_MCU_CMD(0xD318); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD319); LCD_MCU_DATA(0x48);
	LCD_MCU_CMD(0xD31A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD31B); LCD_MCU_DATA(0x49);
	LCD_MCU_CMD(0xD31C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD31D); LCD_MCU_DATA(0x79);
	LCD_MCU_CMD(0xD31E); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD31F); LCD_MCU_DATA(0xAA);
	LCD_MCU_CMD(0xD320); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD321); LCD_MCU_DATA(0xC4);
	LCD_MCU_CMD(0xD322); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD323); LCD_MCU_DATA(0xE4);
	LCD_MCU_CMD(0xD324); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD325); LCD_MCU_DATA(0xF8);
	LCD_MCU_CMD(0xD326); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD327); LCD_MCU_DATA(0x10);
	LCD_MCU_CMD(0xD328); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD329); LCD_MCU_DATA(0x20);
	LCD_MCU_CMD(0xD32A); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD32B); LCD_MCU_DATA(0x36);
	LCD_MCU_CMD(0xD32C); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD32D); LCD_MCU_DATA(0x46);
	LCD_MCU_CMD(0xD32E); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD32F); LCD_MCU_DATA(0x5C);
	LCD_MCU_CMD(0xD330); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD331); LCD_MCU_DATA(0x8B);
	LCD_MCU_CMD(0xD332); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD333); LCD_MCU_DATA(0xFF);

	LCD_MCU_CMD(0xD400); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD401); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD402); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD403); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD404); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD405); LCD_MCU_DATA(0x18);
	LCD_MCU_CMD(0xD406); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD407); LCD_MCU_DATA(0x3B);
	LCD_MCU_CMD(0xD408); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD409); LCD_MCU_DATA(0x60);
	LCD_MCU_CMD(0xD40A); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD40B); LCD_MCU_DATA(0x9E);
	LCD_MCU_CMD(0xD40C); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD40D); LCD_MCU_DATA(0xCF);
	LCD_MCU_CMD(0xD40E); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD40F); LCD_MCU_DATA(0x17);
	LCD_MCU_CMD(0xD410); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD411); LCD_MCU_DATA(0x4B);
	LCD_MCU_CMD(0xD412); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD413); LCD_MCU_DATA(0x93);
	LCD_MCU_CMD(0xD414); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD415); LCD_MCU_DATA(0xC6);
	LCD_MCU_CMD(0xD416); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD417); LCD_MCU_DATA(0x10);
	LCD_MCU_CMD(0xD418); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD419); LCD_MCU_DATA(0x48);
	LCD_MCU_CMD(0xD41A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD41B); LCD_MCU_DATA(0x49);
	LCD_MCU_CMD(0xD41C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD41D); LCD_MCU_DATA(0x79);
	LCD_MCU_CMD(0xD41E); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD41F); LCD_MCU_DATA(0xAA);
	LCD_MCU_CMD(0xD420); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD421); LCD_MCU_DATA(0xC4);
	LCD_MCU_CMD(0xD422); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD423); LCD_MCU_DATA(0xE4);
	LCD_MCU_CMD(0xD424); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD425); LCD_MCU_DATA(0xF8);
	LCD_MCU_CMD(0xD426); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD427); LCD_MCU_DATA(0x10);
	LCD_MCU_CMD(0xD428); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD429); LCD_MCU_DATA(0x20);
	LCD_MCU_CMD(0xD42A); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD42B); LCD_MCU_DATA(0x36);
	LCD_MCU_CMD(0xD42C); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD42D); LCD_MCU_DATA(0x46);
	LCD_MCU_CMD(0xD42E); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD42F); LCD_MCU_DATA(0x5C);
	LCD_MCU_CMD(0xD430); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD431); LCD_MCU_DATA(0x8B);
	LCD_MCU_CMD(0xD432); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD433); LCD_MCU_DATA(0xFF);

	LCD_MCU_CMD(0xD500); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD501); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD502); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD503); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD504); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD505); LCD_MCU_DATA(0x18);
	LCD_MCU_CMD(0xD506); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD507); LCD_MCU_DATA(0x3B);
	LCD_MCU_CMD(0xD508); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD509); LCD_MCU_DATA(0x60);
	LCD_MCU_CMD(0xD50A); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD50B); LCD_MCU_DATA(0x9E);
	LCD_MCU_CMD(0xD50C); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD50D); LCD_MCU_DATA(0xCF);
	LCD_MCU_CMD(0xD50E); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD50F); LCD_MCU_DATA(0x17);
	LCD_MCU_CMD(0xD510); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD511); LCD_MCU_DATA(0x4B);
	LCD_MCU_CMD(0xD512); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD513); LCD_MCU_DATA(0x93);
	LCD_MCU_CMD(0xD514); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD515); LCD_MCU_DATA(0xC6);
	LCD_MCU_CMD(0xD516); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD517); LCD_MCU_DATA(0x10);
	LCD_MCU_CMD(0xD518); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD519); LCD_MCU_DATA(0x48);
	LCD_MCU_CMD(0xD51A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD51B); LCD_MCU_DATA(0x49);
	LCD_MCU_CMD(0xD51C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD51D); LCD_MCU_DATA(0x79);
	LCD_MCU_CMD(0xD51E); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD51F); LCD_MCU_DATA(0xAA);
	LCD_MCU_CMD(0xD520); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD521); LCD_MCU_DATA(0xC4);
	LCD_MCU_CMD(0xD522); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD523); LCD_MCU_DATA(0xE4);
	LCD_MCU_CMD(0xD524); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD525); LCD_MCU_DATA(0xF8);
	LCD_MCU_CMD(0xD526); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD527); LCD_MCU_DATA(0x10);
	LCD_MCU_CMD(0xD528); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD529); LCD_MCU_DATA(0x20);
	LCD_MCU_CMD(0xD52A); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD52B); LCD_MCU_DATA(0x36);
	LCD_MCU_CMD(0xD52C); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD52D); LCD_MCU_DATA(0x46);
	LCD_MCU_CMD(0xD52E); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD52F); LCD_MCU_DATA(0x5C);
	LCD_MCU_CMD(0xD530); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD531); LCD_MCU_DATA(0x8B);
	LCD_MCU_CMD(0xD532); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD533); LCD_MCU_DATA(0xFF);

	LCD_MCU_CMD(0xD600); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD601); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD602); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD603); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD604); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD605); LCD_MCU_DATA(0x18);
	LCD_MCU_CMD(0xD606); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD607); LCD_MCU_DATA(0x3B);
	LCD_MCU_CMD(0xD608); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD609); LCD_MCU_DATA(0x60);
	LCD_MCU_CMD(0xD60A); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD60B); LCD_MCU_DATA(0x9E);
	LCD_MCU_CMD(0xD60C); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD60D); LCD_MCU_DATA(0xCF);
	LCD_MCU_CMD(0xD60E); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD60F); LCD_MCU_DATA(0x17);
	LCD_MCU_CMD(0xD610); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD611); LCD_MCU_DATA(0x4B);
	LCD_MCU_CMD(0xD612); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD613); LCD_MCU_DATA(0x93);
	LCD_MCU_CMD(0xD614); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD615); LCD_MCU_DATA(0xC6);
	LCD_MCU_CMD(0xD616); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD617); LCD_MCU_DATA(0x10);
	LCD_MCU_CMD(0xD618); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD619); LCD_MCU_DATA(0x48);
	LCD_MCU_CMD(0xD61A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD61B); LCD_MCU_DATA(0x49);
	LCD_MCU_CMD(0xD61C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD61D); LCD_MCU_DATA(0x79);
	LCD_MCU_CMD(0xD61E); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD61F); LCD_MCU_DATA(0xAA);
	LCD_MCU_CMD(0xD620); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD621); LCD_MCU_DATA(0xC4);
	LCD_MCU_CMD(0xD622); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD623); LCD_MCU_DATA(0xE4);
	LCD_MCU_CMD(0xD624); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD625); LCD_MCU_DATA(0xF8);
	LCD_MCU_CMD(0xD626); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD627); LCD_MCU_DATA(0x10);
	LCD_MCU_CMD(0xD628); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD629); LCD_MCU_DATA(0x20);
	LCD_MCU_CMD(0xD62A); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD62B); LCD_MCU_DATA(0x36);
	LCD_MCU_CMD(0xD62C); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD62D); LCD_MCU_DATA(0x46);
	LCD_MCU_CMD(0xD62E); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD62F); LCD_MCU_DATA(0x5C);
	LCD_MCU_CMD(0xD630); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD631); LCD_MCU_DATA(0x8B);
	LCD_MCU_CMD(0xD632); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD633); LCD_MCU_DATA(0xFF);
*/

	LCD_MCU_CMD(0xD100); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD101); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD102); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD103); LCD_MCU_DATA(0x0C);
	LCD_MCU_CMD(0xD104); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD105); LCD_MCU_DATA(0x1B);
	LCD_MCU_CMD(0xD106); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD107); LCD_MCU_DATA(0x2C);
	LCD_MCU_CMD(0xD108); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD109); LCD_MCU_DATA(0x57);
	LCD_MCU_CMD(0xD10A); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD10B); LCD_MCU_DATA(0x70);
	LCD_MCU_CMD(0xD10C); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD10D); LCD_MCU_DATA(0x98);
	LCD_MCU_CMD(0xD10E); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD10F); LCD_MCU_DATA(0x3A);
	LCD_MCU_CMD(0xD110); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD111); LCD_MCU_DATA(0x6D);
	LCD_MCU_CMD(0xD112); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD113); LCD_MCU_DATA(0xA8);
	LCD_MCU_CMD(0xD114); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD115); LCD_MCU_DATA(0xD0);
	LCD_MCU_CMD(0xD116); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD117); LCD_MCU_DATA(0x05);
	LCD_MCU_CMD(0xD118); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD119); LCD_MCU_DATA(0x2F);
	LCD_MCU_CMD(0xD11A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD11B); LCD_MCU_DATA(0x30);
	LCD_MCU_CMD(0xD11C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD11D); LCD_MCU_DATA(0x54);
	LCD_MCU_CMD(0xD11E); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD11F); LCD_MCU_DATA(0x79);
	LCD_MCU_CMD(0xD120); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD121); LCD_MCU_DATA(0x8E);
	LCD_MCU_CMD(0xD122); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD123); LCD_MCU_DATA(0xA5);
	LCD_MCU_CMD(0xD124); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD125); LCD_MCU_DATA(0xB4);
	LCD_MCU_CMD(0xD126); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD127); LCD_MCU_DATA(0xC8);
	LCD_MCU_CMD(0xD128); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD129); LCD_MCU_DATA(0xD4);
	LCD_MCU_CMD(0xD12A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD12B); LCD_MCU_DATA(0xE6);
	LCD_MCU_CMD(0xD12C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD12D); LCD_MCU_DATA(0xF3);
	LCD_MCU_CMD(0xD12E); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD12F); LCD_MCU_DATA(0x06);
	LCD_MCU_CMD(0xD130); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD131); LCD_MCU_DATA(0x33);
	LCD_MCU_CMD(0xD132); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD133); LCD_MCU_DATA(0xFF);

	LCD_MCU_CMD(0xD200); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD201); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD202); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD203); LCD_MCU_DATA(0x0C);
	LCD_MCU_CMD(0xD204); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD205); LCD_MCU_DATA(0x1B);
	LCD_MCU_CMD(0xD206); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD207); LCD_MCU_DATA(0x2C);
	LCD_MCU_CMD(0xD208); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD209); LCD_MCU_DATA(0x57);
	LCD_MCU_CMD(0xD20A); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD20B); LCD_MCU_DATA(0x70);
	LCD_MCU_CMD(0xD20C); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD20D); LCD_MCU_DATA(0x98);
	LCD_MCU_CMD(0xD20E); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD20F); LCD_MCU_DATA(0x3A);
	LCD_MCU_CMD(0xD210); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD211); LCD_MCU_DATA(0x6D);
	LCD_MCU_CMD(0xD212); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD213); LCD_MCU_DATA(0xA8);
	LCD_MCU_CMD(0xD214); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD215); LCD_MCU_DATA(0xD0);
	LCD_MCU_CMD(0xD216); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD217); LCD_MCU_DATA(0x05);
	LCD_MCU_CMD(0xD218); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD219); LCD_MCU_DATA(0x2F);
	LCD_MCU_CMD(0xD21A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD21B); LCD_MCU_DATA(0x30);
	LCD_MCU_CMD(0xD21C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD21D); LCD_MCU_DATA(0x54);
	LCD_MCU_CMD(0xD21E); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD21F); LCD_MCU_DATA(0x79);
	LCD_MCU_CMD(0xD220); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD221); LCD_MCU_DATA(0x8E);
	LCD_MCU_CMD(0xD222); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD223); LCD_MCU_DATA(0xA5);
	LCD_MCU_CMD(0xD224); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD225); LCD_MCU_DATA(0xB4);
	LCD_MCU_CMD(0xD226); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD227); LCD_MCU_DATA(0xC8);
	LCD_MCU_CMD(0xD228); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD229); LCD_MCU_DATA(0xD4);
	LCD_MCU_CMD(0xD22A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD22B); LCD_MCU_DATA(0xE6);
	LCD_MCU_CMD(0xD22C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD22D); LCD_MCU_DATA(0xF3);
	LCD_MCU_CMD(0xD22E); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD22F); LCD_MCU_DATA(0x06);
	LCD_MCU_CMD(0xD230); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD231); LCD_MCU_DATA(0x33);
	LCD_MCU_CMD(0xD232); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD233); LCD_MCU_DATA(0xFF);

	LCD_MCU_CMD(0xD300); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD301); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD302); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD303); LCD_MCU_DATA(0x0C);
	LCD_MCU_CMD(0xD304); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD305); LCD_MCU_DATA(0x1B);
	LCD_MCU_CMD(0xD306); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD307); LCD_MCU_DATA(0x2C);
	LCD_MCU_CMD(0xD308); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD309); LCD_MCU_DATA(0x57);
	LCD_MCU_CMD(0xD30A); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD30B); LCD_MCU_DATA(0x70);
	LCD_MCU_CMD(0xD30C); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD30D); LCD_MCU_DATA(0x98);
	LCD_MCU_CMD(0xD30E); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD30F); LCD_MCU_DATA(0x3A);
	LCD_MCU_CMD(0xD310); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD311); LCD_MCU_DATA(0x6D);
	LCD_MCU_CMD(0xD312); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD313); LCD_MCU_DATA(0xA8);
	LCD_MCU_CMD(0xD314); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD315); LCD_MCU_DATA(0xD0);
	LCD_MCU_CMD(0xD316); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD317); LCD_MCU_DATA(0x05);
	LCD_MCU_CMD(0xD318); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD319); LCD_MCU_DATA(0x2F);
	LCD_MCU_CMD(0xD31A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD31B); LCD_MCU_DATA(0x30);
	LCD_MCU_CMD(0xD31C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD31D); LCD_MCU_DATA(0x54);
	LCD_MCU_CMD(0xD31E); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD31F); LCD_MCU_DATA(0x79);
	LCD_MCU_CMD(0xD320); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD321); LCD_MCU_DATA(0x8E);
	LCD_MCU_CMD(0xD322); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD323); LCD_MCU_DATA(0xA5);
	LCD_MCU_CMD(0xD324); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD325); LCD_MCU_DATA(0xB4);
	LCD_MCU_CMD(0xD326); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD327); LCD_MCU_DATA(0xC8);
	LCD_MCU_CMD(0xD328); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD329); LCD_MCU_DATA(0xD4);
	LCD_MCU_CMD(0xD32A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD32B); LCD_MCU_DATA(0xE6);
	LCD_MCU_CMD(0xD32C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD32D); LCD_MCU_DATA(0xF3);
	LCD_MCU_CMD(0xD32E); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD32F); LCD_MCU_DATA(0x06);
	LCD_MCU_CMD(0xD330); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD331); LCD_MCU_DATA(0x33);
	LCD_MCU_CMD(0xD332); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD333); LCD_MCU_DATA(0xFF);

	LCD_MCU_CMD(0xD400); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD401); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD402); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD403); LCD_MCU_DATA(0x0C);
	LCD_MCU_CMD(0xD404); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD405); LCD_MCU_DATA(0x1B);
	LCD_MCU_CMD(0xD406); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD407); LCD_MCU_DATA(0x2C);
	LCD_MCU_CMD(0xD408); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD409); LCD_MCU_DATA(0x57);
	LCD_MCU_CMD(0xD40A); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD40B); LCD_MCU_DATA(0x70);
	LCD_MCU_CMD(0xD40C); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD40D); LCD_MCU_DATA(0x98);
	LCD_MCU_CMD(0xD40E); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD40F); LCD_MCU_DATA(0x3A);
	LCD_MCU_CMD(0xD410); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD411); LCD_MCU_DATA(0x6D);
	LCD_MCU_CMD(0xD412); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD413); LCD_MCU_DATA(0xA8);
	LCD_MCU_CMD(0xD414); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD415); LCD_MCU_DATA(0xD0);
	LCD_MCU_CMD(0xD416); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD417); LCD_MCU_DATA(0x05);
	LCD_MCU_CMD(0xD418); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD419); LCD_MCU_DATA(0x2F);
	LCD_MCU_CMD(0xD41A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD41B); LCD_MCU_DATA(0x30);
	LCD_MCU_CMD(0xD41C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD41D); LCD_MCU_DATA(0x54);
	LCD_MCU_CMD(0xD41E); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD41F); LCD_MCU_DATA(0x79);
	LCD_MCU_CMD(0xD420); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD421); LCD_MCU_DATA(0x8E);
	LCD_MCU_CMD(0xD422); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD423); LCD_MCU_DATA(0xA5);
	LCD_MCU_CMD(0xD424); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD425); LCD_MCU_DATA(0xB4);
	LCD_MCU_CMD(0xD426); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD427); LCD_MCU_DATA(0xC8);
	LCD_MCU_CMD(0xD428); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD429); LCD_MCU_DATA(0xD4);
	LCD_MCU_CMD(0xD42A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD42B); LCD_MCU_DATA(0xE6);
	LCD_MCU_CMD(0xD42C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD42D); LCD_MCU_DATA(0xF3);
	LCD_MCU_CMD(0xD42E); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD42F); LCD_MCU_DATA(0x06);
	LCD_MCU_CMD(0xD430); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD431); LCD_MCU_DATA(0x33);
	LCD_MCU_CMD(0xD432); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD433); LCD_MCU_DATA(0xFF);

	LCD_MCU_CMD(0xD500); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD501); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD502); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD503); LCD_MCU_DATA(0x0C);
	LCD_MCU_CMD(0xD504); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD505); LCD_MCU_DATA(0x1B);
	LCD_MCU_CMD(0xD506); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD507); LCD_MCU_DATA(0x2C);
	LCD_MCU_CMD(0xD508); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD509); LCD_MCU_DATA(0x57);
	LCD_MCU_CMD(0xD50A); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD50B); LCD_MCU_DATA(0x70);
	LCD_MCU_CMD(0xD50C); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD50D); LCD_MCU_DATA(0x98);
	LCD_MCU_CMD(0xD50E); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD50F); LCD_MCU_DATA(0x3A);
	LCD_MCU_CMD(0xD510); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD511); LCD_MCU_DATA(0x6D);
	LCD_MCU_CMD(0xD512); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD513); LCD_MCU_DATA(0xA8);
	LCD_MCU_CMD(0xD514); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD515); LCD_MCU_DATA(0xD0);
	LCD_MCU_CMD(0xD516); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD517); LCD_MCU_DATA(0x05);
	LCD_MCU_CMD(0xD518); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD519); LCD_MCU_DATA(0x2F);
	LCD_MCU_CMD(0xD51A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD51B); LCD_MCU_DATA(0x30);
	LCD_MCU_CMD(0xD51C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD51D); LCD_MCU_DATA(0x54);
	LCD_MCU_CMD(0xD51E); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD51F); LCD_MCU_DATA(0x79);
	LCD_MCU_CMD(0xD520); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD521); LCD_MCU_DATA(0x8E);
	LCD_MCU_CMD(0xD522); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD523); LCD_MCU_DATA(0xA5);
	LCD_MCU_CMD(0xD524); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD525); LCD_MCU_DATA(0xB4);
	LCD_MCU_CMD(0xD526); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD527); LCD_MCU_DATA(0xC8);
	LCD_MCU_CMD(0xD528); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD529); LCD_MCU_DATA(0xD4);
	LCD_MCU_CMD(0xD52A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD52B); LCD_MCU_DATA(0xE6);
	LCD_MCU_CMD(0xD52C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD52D); LCD_MCU_DATA(0xF3);
	LCD_MCU_CMD(0xD52E); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD52F); LCD_MCU_DATA(0x06);
	LCD_MCU_CMD(0xD530); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD531); LCD_MCU_DATA(0x33);
	LCD_MCU_CMD(0xD532); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD533); LCD_MCU_DATA(0xFF);

	LCD_MCU_CMD(0xD600); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD601); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD602); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD603); LCD_MCU_DATA(0x0C);
	LCD_MCU_CMD(0xD604); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD605); LCD_MCU_DATA(0x1B);
	LCD_MCU_CMD(0xD606); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD607); LCD_MCU_DATA(0x2C);
	LCD_MCU_CMD(0xD608); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD609); LCD_MCU_DATA(0x57);
	LCD_MCU_CMD(0xD60A); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD60B); LCD_MCU_DATA(0x70);
	LCD_MCU_CMD(0xD60C); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0xD60D); LCD_MCU_DATA(0x98);
	LCD_MCU_CMD(0xD60E); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD60F); LCD_MCU_DATA(0x3A);
	LCD_MCU_CMD(0xD610); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD611); LCD_MCU_DATA(0x6D);
	LCD_MCU_CMD(0xD612); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD613); LCD_MCU_DATA(0xA8);
	LCD_MCU_CMD(0xD614); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xD615); LCD_MCU_DATA(0xD0);
	LCD_MCU_CMD(0xD616); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD617); LCD_MCU_DATA(0x05);
	LCD_MCU_CMD(0xD618); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD619); LCD_MCU_DATA(0x2F);
	LCD_MCU_CMD(0xD61A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD61B); LCD_MCU_DATA(0x30);
	LCD_MCU_CMD(0xD61C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD61D); LCD_MCU_DATA(0x54);
	LCD_MCU_CMD(0xD61E); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD61F); LCD_MCU_DATA(0x79);
	LCD_MCU_CMD(0xD620); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD621); LCD_MCU_DATA(0x8E);
	LCD_MCU_CMD(0xD622); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD623); LCD_MCU_DATA(0xA5);
	LCD_MCU_CMD(0xD624); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD625); LCD_MCU_DATA(0xB4);
	LCD_MCU_CMD(0xD626); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD627); LCD_MCU_DATA(0xC8);
	LCD_MCU_CMD(0xD628); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD629); LCD_MCU_DATA(0xD4);
	LCD_MCU_CMD(0xD62A); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD62B); LCD_MCU_DATA(0xE6);
	LCD_MCU_CMD(0xD62C); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xD62D); LCD_MCU_DATA(0xF3);
	LCD_MCU_CMD(0xD62E); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD62F); LCD_MCU_DATA(0x06);
	LCD_MCU_CMD(0xD630); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD631); LCD_MCU_DATA(0x33);
	LCD_MCU_CMD(0xD632); LCD_MCU_DATA(0x03);
	LCD_MCU_CMD(0xD633); LCD_MCU_DATA(0xFF);

	LCD_MCU_CMD(0xF000); LCD_MCU_DATA(0x55);
	LCD_MCU_CMD(0xF001); LCD_MCU_DATA(0xAA);
	LCD_MCU_CMD(0xF002); LCD_MCU_DATA(0x52);
	LCD_MCU_CMD(0xF003); LCD_MCU_DATA(0x08);
	LCD_MCU_CMD(0xF004); LCD_MCU_DATA(0x00);

	LCD_MCU_CMD(0xB100); LCD_MCU_DATA(0xFC);

	LCD_MCU_CMD(0xB400); LCD_MCU_DATA(0x10);

	LCD_MCU_CMD(0xB600); LCD_MCU_DATA(0x01);

	LCD_MCU_CMD(0xB800); LCD_MCU_DATA(0x01);
	LCD_MCU_CMD(0xB801); LCD_MCU_DATA(0x04);
	LCD_MCU_CMD(0xB802); LCD_MCU_DATA(0x04);
	LCD_MCU_CMD(0xB803); LCD_MCU_DATA(0x04);

	LCD_MCU_CMD(0xBA00); LCD_MCU_DATA(0x01);

	LCD_MCU_CMD(0xBC00); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xBC01); LCD_MCU_DATA(0x02);
	LCD_MCU_CMD(0xBC02); LCD_MCU_DATA(0x02);

	LCD_MCU_CMD(0x3A00); LCD_MCU_DATA(0x55);

	LCD_MCU_CMD(0xC900); LCD_MCU_DATA(0xC0);
	LCD_MCU_CMD(0xC901); LCD_MCU_DATA(0x01);

	LCD_MCU_CMD(0xF000); LCD_MCU_DATA(0x55);
	LCD_MCU_CMD(0xF001); LCD_MCU_DATA(0xAA);
	LCD_MCU_CMD(0xF002); LCD_MCU_DATA(0x52);
	LCD_MCU_CMD(0xF003); LCD_MCU_DATA(0x08);
	LCD_MCU_CMD(0xF004); LCD_MCU_DATA(0x02);

	LCD_MCU_CMD(0xF600); LCD_MCU_DATA(0xA0);//60

	LCD_MCU_CMD(0x3500); LCD_MCU_DATA(0x01);

	LCD_MCU_CMD(0x4400); LCD_MCU_DATA(0x00);
	LCD_MCU_CMD(0x4401); LCD_MCU_DATA(0x60);

	LCD_MCU_CMD(0x3600); LCD_MCU_DATA(0x00);

	LCD_MCU_CMD(0x1100);
	msleep(120);
	LCD_MCU_CMD(0x2900);

	msleep(20);
	LCD_MCU_CMD(0x2C00);

	for(height=0;height<800;height++){
		for(width=0;width<480;width++){
			 LCD_MCU_DATA(0x0000);
		}
	}

	return 0;
}

static int rm68180_mcu_sleep(void)
{
#if 1
	LCD_MCU_CMD(0x28);
	msleep(20);
	LCD_MCU_CMD(0x10);
	msleep(50);
	LCD_MCU_CMD(0x4F00);
	LCD_MCU_DATA(0x01);
	msleep(50);

#endif

	return 0;
}

static int rm68180_mcu_wakeup(void)
{
	gpio_set_value(GPIO_LCD_RESET, 1);
	msleep(10);
	gpio_set_value(GPIO_LCD_RESET, 0);
	msleep(10);
	gpio_set_value(GPIO_LCD_RESET, 1);
	msleep(120);
	rm68180_mcu_open();

	return 0;
}

static int rm68180_mcu_set_active_win(struct gouda_rect *r)
{
#if 0
	LCD_MCU_CMD(0x2a00);
	LCD_MCU_DATA(r->tlX >> 8);
	LCD_MCU_CMD(0x2a01);
	LCD_MCU_DATA(r->tlX & 0x00ff);
	LCD_MCU_CMD(0x2a02);
	LCD_MCU_DATA(r->brX>>8);
	LCD_MCU_CMD(0x2a03);
	LCD_MCU_DATA(r->brX & 0x00ff);

	LCD_MCU_CMD(0x2b00);
	LCD_MCU_DATA(r->tlY >> 8);
	LCD_MCU_CMD(0x2b01);
	LCD_MCU_DATA(r->tlY & 0x00ff);
	LCD_MCU_CMD(0x2b02);
	LCD_MCU_DATA(r->brY>>8);
	LCD_MCU_CMD(0x2b03);
	LCD_MCU_DATA(r->brY & 0x00ff);

	LCD_MCU_CMD(0x2c00);
#endif
	return 0;
}

static int rm68180_mcu_set_rotation(int rotate)
{
	return 0;
}

static int rm68180_mcu_close(void)
{
	return 0;
}

static struct rda_panel_id_param rm68180_id_param = {
	.lcd_info = &rm68180_mcu_info,
	.per_read_bytes = 2,
};

static void rm68180_mcu_read_fb(u8 *buffer)
{
	int i = 0;
	short x0, y0, x1, y1;
	short h_X_start,l_X_start,h_X_end,l_X_end,h_Y_start,l_Y_start,h_Y_end,l_Y_end;
	u16 readData[3];
	struct gouda_lcd *lcd = (void *)&(rm68180_mcu_info.lcd);
	printk("rm68180_mcu_read_fb\n");

	rda_gouda_stretch_pre_wait_and_enable_clk();

	x0 = 0;
	y0 = 0;
	x1 = WVGA_LCDD_DISP_X-1;
	y1 = WVGA_LCDD_DISP_Y-1;

	h_X_start=((x0&0x0300)>>8);
	l_X_start=(x0&0x00FF);
	h_X_end=((x1&0x0300)>>8);
	l_X_end=(x1&0x00FF);

	h_Y_start=((y0&0x0300)>>8);
	l_Y_start=(y0&0x00FF);
	h_Y_end=((y1&0x0300)>>8);
	l_Y_end=(y1&0x00FF);

	/* adjust timming */
	lcd->lcd_timing.mcu.pwl = 32;
	lcd->lcd_timing.mcu.pwh = 32;
	rda_gouda_configure_timing(lcd);

	LCD_MCU_CMD(0x2A00);
	LCD_MCU_DATA(h_X_start);
	LCD_MCU_DATA(l_X_start);
	LCD_MCU_DATA(h_X_end);
	LCD_MCU_DATA(l_X_end);
	LCD_MCU_CMD(0x2B00);
	LCD_MCU_DATA(h_Y_start);
	LCD_MCU_DATA(l_Y_start);
	LCD_MCU_DATA(h_Y_end);
	LCD_MCU_DATA(l_Y_end);
	LCD_MCU_CMD(0x2E00);

	//Dummy Read
	LCD_MCU_READ16(&readData[0]);

	for(i=0; i<30; i++){
		LCD_MCU_READ16(&readData[0]);
		LCD_MCU_READ16(&readData[1]);
		printk("rda_factory_auto_test 0x%04x 0x%04x\n", readData[0], readData[1]);
		((u16 *)buffer)[i]   = (readData[0]&0xF800)|((readData[0]&0xFC)<<3)|((readData[1]&0xF800)>>11);
	}

	/* adjust timming */
	lcd->lcd_timing.mcu.pwl = 8;
	lcd->lcd_timing.mcu.pwh = 8;
	rda_gouda_configure_timing(lcd);

	rda_gouda_stretch_post_disable_clk();

}

static int rm68180_rda_lcd_dbg_w(void *p,int n)
{
	int i;
	int *buf = (int *)p;

	printk(KERN_ERR "lcd_dbg_w:cmd:0x%x\n",buf[0]);
	if (buf[0] == 0xff){
		msleep(buf[1]);
		return 0;
	}

	LCD_MCU_CMD(buf[0]);
	for(i = 1;i< n;i++){
		LCD_MCU_DATA(buf[i]);
		printk(KERN_ERR "lcd_dbg_w:data:0x%x\n",buf[i]);
	}
	return 0;
}

static struct rda_lcd_info rm68180_mcu_info = {
	.ops = {
		.s_init_gpio = rm68180_mcu_init_gpio,
		.s_open = rm68180_mcu_open,
		.s_readid = rm68180_mcu_readid,
		.s_active_win = rm68180_mcu_set_active_win,
		.s_rotation = rm68180_mcu_set_rotation,
		.s_sleep = rm68180_mcu_sleep,
		.s_wakeup = rm68180_mcu_wakeup,
		.s_read_fb = rm68180_mcu_read_fb,
		.s_close = rm68180_mcu_close,
		.s_rda_lcd_dbg_w = rm68180_rda_lcd_dbg_w},
	.lcd = {
		.width = WVGA_LCDD_DISP_X,
		.height = WVGA_LCDD_DISP_Y,
		.lcd_interface = GOUDA_LCD_IF_DBI,
		.lcd_timing = RM68180_MCU_TIMING,
		.lcd_cfg = RM68180_MCU_CONFIG
	},
	.name = RM68180_MCU_PANEL_NAME,
};

/*--------------------Platform Device Probe-------------------------*/

static int rda_fb_panel_rm68180_mcu_probe(struct platform_device *pdev)
{
	rda_fb_register_panel(&rm68180_mcu_info);

	dev_info(&pdev->dev, "rda panel rm68180_mcu registered\n");

	return 0;
}

static int rda_fb_panel_rm68180_mcu_remove(struct platform_device *pdev)
{
	return 0;
}

static struct platform_driver rda_fb_panel_rm68180_mcu_driver = {
	.probe = rda_fb_panel_rm68180_mcu_probe,
	.remove = rda_fb_panel_rm68180_mcu_remove,
	.driver = {
		.name = RM68180_MCU_PANEL_NAME
	}
};
static struct rda_panel_driver rm68180_mcu_panel_driver = {
	.panel_type = GOUDA_LCD_IF_DBI,
	.lcd_driver_info = &rm68180_mcu_info,
	.pltaform_panel_driver = &rda_fb_panel_rm68180_mcu_driver,
};

static int __init rda_fb_panel_rm68180_mcu_init(void)
{
	rda_fb_probe_panel(&rm68180_mcu_info, &rda_fb_panel_rm68180_mcu_driver);
	return platform_driver_register(&rda_fb_panel_rm68180_mcu_driver);
}

static void __exit rda_fb_panel_rm68180_mcu_exit(void)
{
	platform_driver_unregister(&rda_fb_panel_rm68180_mcu_driver);
}

module_init(rda_fb_panel_rm68180_mcu_init);
module_exit(rda_fb_panel_rm68180_mcu_exit);
